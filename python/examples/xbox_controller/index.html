
<html>
  <head>
    <title>Spot SDK</title>
    <link rel="stylesheet" type="text/css" href="./../../../docs/css/markdown.css"/>
  </head>
  <body class="markdown-body">
  
<h1>Xbox Controller</h1>
<p>Xbox Controller example allows users to control a Spot robot through an Xbox controller. The example was tested with an Xbox 360 wired controller. The button mapping is:</p>
<table>
<thead>
<tr>
<th>Button Combination</th>
<th>Functionality</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>Walk</td>
</tr>
<tr>
<td>B</td>
<td>Stand</td>
</tr>
<tr>
<td>X</td>
<td>Sit</td>
</tr>
<tr>
<td>Y</td>
<td>Stairs</td>
</tr>
<tr>
<td>LB + :</td>
<td></td>
</tr>
<tr>
<td>- D-pad up/down</td>
<td>Walk height</td>
</tr>
<tr>
<td>- D-pad left/right</td>
<td>Self right</td>
</tr>
<tr>
<td>- Y</td>
<td>Jog</td>
</tr>
<tr>
<td>- A</td>
<td>Amble</td>
</tr>
<tr>
<td>- B</td>
<td>Crawl</td>
</tr>
<tr>
<td>- X</td>
<td>Hop</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td>If Stand Mode</td>
<td></td>
</tr>
<tr>
<td>- Left Stick</td>
<td></td>
</tr>
<tr>
<td>-- X</td>
<td>Rotate body in roll axis</td>
</tr>
<tr>
<td>-- Y</td>
<td>Control height</td>
</tr>
<tr>
<td>- Right Stick</td>
<td></td>
</tr>
<tr>
<td>-- X</td>
<td>Turn body in yaw axis</td>
</tr>
<tr>
<td>-- Y</td>
<td>Turn body in pitch axis</td>
</tr>
<tr>
<td>Else</td>
<td></td>
</tr>
<tr>
<td>- Left Stick</td>
<td>Move</td>
</tr>
<tr>
<td>- Right Stick</td>
<td>Turn</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td>LB + RB + B</td>
<td>E-stop</td>
</tr>
<tr>
<td>Start</td>
<td>Motor power &amp; Control</td>
</tr>
<tr>
<td>Back</td>
<td>Exit</td>
</tr>
</tbody>
</table>
<h2>User Guide</h2>
<h3>Installation</h3>
<p>Currently, the Xbox Controller supports only Ubuntu OS. To install this example on Ubuntu 18.04, follow these instructions:</p>
<ul>
<li>Install python3: <code>sudo apt-get install python3.6</code></li>
<li>Install pip3: <code>sudo apt-get install python3-pip</code></li>
<li>Install virtualenv: <code>pip3 install virtualenv</code></li>
<li>Install xboxdrv: <code>sudo apt-get install xboxdrv</code></li>
<li>Change into example directory: <code>cd xbox_controller</code></li>
<li>Create virtual environment (one time operation): <code>virtualenv -p {PATH_TO_PYTHON3_EXECUTABLE} venv</code>. The path to the executable is the output of <code>which python3</code> command, usually set to <code>/usr/bin/python3</code>.</li>
<li>Start virtual environment: <code>source venv/bin/activate</code></li>
<li>Install dependencies: <code>python -m pip install -r requirements.txtpip install -r requirements.txt</code></li>
<li>Run the example using instructions in the next section</li>
<li>To exit the virtual environment, run <code>deactivate</code></li>
</ul>
<h3>Execution</h3>
<p>This example follows the common pattern for expected arguments. It needs the common arguments used to configure the SDK and connect to a Spot:</p>
<ul>
<li>--username</li>
<li>--password</li>
<li>--app-token</li>
<li>hostname passed as the last argument</li>
</ul>
<p><strong>1)</strong> The example needs to be run as sudo. To run a python program as sudo within a virtual environment, you need to specify the python executable in the virtualenv folder:</p>
<p><code>sudo venv/bin/python xbox_controller.py --user USER --password PASSWORD ROBOT_IP</code></p>
<p><strong>2)</strong> After the controller is connected, the example prints a status window:</p>
<pre><code>E-Stop	Control	Motors On	Mode
</code></pre>
<p><strong>3)</strong> Next, press the key combination <code>Left Button + Right Button + B</code> to turn E-Stop on:</p>
<pre><code>E-Stop	Control	Motors On	Mode
X
</code></pre>
<p><strong>4)</strong> Next, press the <code>Guide</code> button to acquire a lease with the robot:</p>
<pre><code>E-Stop	Control	Motors On	Mode
X       X
</code></pre>
<p><strong>5)</strong> Next, press the <code>Start</code> button to turn the motors on:</p>
<pre><code>E-Stop	Control	Motors On	Mode
X       X       X
</code></pre>
<p><strong>6)</strong> The robot is now ready to be controlled.</p>
<p><strong>7)</strong> To E-stop the robot at any time, press the E-stop button combination (LB + RB + B)</p>
<p><strong>8)</strong> To exit and power off the robot, press the <code>Back</code> button.</p>
  </body>
</html>
